<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dhmit UROP guide | Setting up paris_1970</title>
    <meta name="author" content="MIT Digital Humanities">
    <meta name="description" content="UROP guide for the MIT Programs in Digital Humanities">
    <meta name="keywords" content="digital humanities, MIT, urop">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <link href="/assets/css/styles.css" rel="stylesheet">
    <link href="/assets/css/prism.css" rel="stylesheet">
</head>
<body>

<div class="global-wrapper">
    <nav class="sidebar bg-light">
        <a href='/'>
            <img src="/assets/images/logo/blue_RGB_lockup.png" alt="MIT Digital Humanities"
                 style="max-width: 180px">
        </a>
        <p class="text-muted mt-4 mb-1 ">Technical Onboarding</p>

        <ol class="nav flex-column">
            <li class="nav-item">
                <a href="/intro"><span class="numeral">0</span> Intro</a>
            </li>

            <li class="nav-item">
                <a href="/git"><span class="numeral">1</span> Git</a>
            </li>

            <li class="nav-item">
                <a href="/python"><span class="numeral">2</span> Python</a>
            </li>

            <li class="nav-item">
                <a href="/pycharm"><span class="numeral">3</span> PyCharm</a>
            </li>

            <li class="nav-item">
                <a href="/node-and-npm"><span class="numeral">4</span> Node and npm</a>
            </li>
        </ol>

        <p class="sidebar-heading d-flex justify-content-between align-items-center mt-4 mb-1 text-muted">
            <span>Other Materials</span></p>

        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="/contract">UROP Contract</a>
            </li>

            <li class="nav-item">
                <a href="/tutorials">Tech Tutorials</a>
            </li>
        </ul>
    </nav>

    <div class="main">
        <main>
            <div class="container-fluid">
                <h1 class="header border-bottom pb-3 mb-3">Setting up paris_1970</h1>

                
<section>
  <p>At this point, you have all of the tools necessary to work on our project installed&mdash;Git,
    Atom, Python, Node/npm, and PyCharm, so let's put it all together and get the project
    running.</p>

  <p>If you have not yet completed the Technical Onboarding guide, you're in the wrong place. Head
    over to the <a href="/intro">Intro</a> and get started there. You'll end up back here
    eventually.</p>
</section>

<section>
  <h2>Cloning the Repository</h2>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Open GitHub Desktop. If this is your first time using the application and you've already
        been added to the dhmit organization, dhmit projects should appear in the repositories pane,
        under the "Filter your repositories" search box. Click on <code>dhmit/paris_1970</code>, and
        click <code>Clone dhmit/paris_1970</code>.</p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/github_desktop_clone_0_fall-2020.png"/></p>
    </div>
  </div>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>If this option doesn't appear, click <code>Clone a repository from the Internet...</code>
        or go to <code>File</code> -&gt; <code>Clone repository</code>. In the URL tab, enter <code>dhmit/paris_1970.git</code>.
      </p>
      <p>Leave the <code>Local path</code> field as is, but take note of it, as you'll need it
        later. Click <code>Clone</code> to download the repo.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/github_desktop_clone_1_fall-2020.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Once the repo is cloned, you should see a screen that looks like this. Try clicking on
        Windows <code>Show in Explorer</code> or on macOS <code>Show in Finder</code> to see where
        the project has ended up on your computer, or click <code>View on GitHub</code> to go to our
        project page on GitHub.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/github_desktop_clone_2_fall-2020.png"/></p>
    </div>
  </div>
</section>

<section>
  <h2>Setting up our project in PyCharm</h2>
  <h3>Open the project</h3>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">

      <p>Open PyCharm. In the menu bar, select File->Open, and open the folder where you cloned the
        repo in the step above. By default on Windows this is <code>C:\Users\YOUR_USER_NAME\Documents\GitHub\paris_1970</code>
        and on macOS <code>/Users/YOUR_USER_NAME/Documents/GitHub/paris_1970</code>.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_open.png"/></p>
    </div>
  </div>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>If you get this dialog box, always select "This Window" (the default) or "New Window" if
        you want to have multiple projects open at once. (Ryaan doesn't recommend the latter:
        PyCharm is <em>very</em> resource-intensive, so unless you absolutely need to have two
        projects open at once, click "This Window".)
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/pycharm_open_project.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Once it's loaded, you should see the <code>paris_1970</code> folder appear in the <code>Project</code>
        pane on the left.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_project_pane.png"/></p>
    </div>
  </div>
</section>

<section>
  <h2>Setup Python environment and packages</h2>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Open the settings window (macOS <code>PyCharm -&gt; Preferences</code>; Windows, <code>File
        -&gt; Settings</code>), and go to "Project: paris_1970" -&gt; Project Interpreter. Click on
        the wheel in the top right and select "Add".
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_interpreter_0.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Select "New Environment". Make sure that the base interpreter is the path that you noted
        when installing Python. Leave the location for the interpreter as the default provided by
        PyCharm.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_new_venv.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Apply your changes, wait for the virtual environment to be created, and exit the settings
        window.</p>
      <p>Click <code>Terminal</code> in the bottom status bar. You should see <code>(venv)</code> at
        the beginning of your prompt. If you do not, restart PyCharm and check again. If you still
        don't see <code>(venv)</code> appear, go back to the beginning of this section and make sure
        you correctly setup a new environment.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_django_venv.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Go back to the Project Interpreter window, and ensure that the Python Interpreter field is
        populated with the name <code>Python 3.10 (paris_1970)</code> followed by a path. If this
        says anything else, find Ryaan to get help fixing it.
      </p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_check_interpreter.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>In the <code>Project</code> panel, find and open the <code>requirements.txt</code> file in
        the top-level <code>paris_1970</code> folder. Wait until PyCharm automatically detects that
        this file contains our Python package requirements. Click <code>Install requirements</code>
        in the banner that pops up, and click <code>Install</code> once the <code>Choose Packages to
          Install</code> window pops up. (If it asks you to install a <em>plugin</em> as shown in
        the top banner here, you can safely click <code>Ignore extension</code>. You should see the
        installation process begin in the bottom status bar. We can let this run while moving on to
        the next step, but we'll come back to this to make sure it worked.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_requirements.png"/></p>
    </div>
  </div>
</section>

<section>
  <h2>Setting up Django support in PyCharm</h2>
  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>
        Our project uses Django, a Python web framework. If we let PyCharm know about Django, we get
        lots of nice extra features.
      </p>
      <p>
        Go back to the settings window, and take a look at <code>Languages &amp; Frameworks</code> -&gt;
        <code>Django</code>.
      </p>
      <p>
        Our project repository has some PyCharm settings saved within it, so it should look
        something like this. If it does, great, move on to
        <a href="#backend_run_config">Setting up a Backend Run Configuration</a>.
      <p>
        Otherwise, if <code>Enable Django Support</code> is not checked, then check it, and follow
        the directions below.
      </p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_django_done.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Set the <code>Django project root</code> to be the <code>backend</code> folder within our
        project.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_django_1.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Set the <code>Settings</code> file to be <code>config/settings/dev.py</code>.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_django_2.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>If the Django pane now looks something like this, you can click OK to apply and exit the
        settings.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_django_done.png"/></p>
    </div>
  </div>
</section>


<section>
  <a id="backend_run_config">
    <h2>Setting up a Backend Run Configuration</h2>
  </a>
  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Click the big <code>Add Configuration</code> button in the top bar. In the <code>Run/Debug
        Configurations</code> window that appears, click the + in the top left corner, and select
        <code>Django server</code>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/rereading_django_4.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Name this configuration <code>Run backend</code> and click <code>OK</code> with all of the
        defaults in place. At this point in the process, you've installed all the third-party
        packages we need to run our project and made PyCharm aware of how to run our Django server.
        Let's check that everything worked.</p>
      <p>Go back to the terminal inside Pycharm, and execute <kbd>pip freeze</kbd>. This should
        output a list that's exactly the same as the contents of the <code>requirements.txt</code>
        file you opened earlier.</p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pip_freeze.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Type <kbd>cd backend</kbd> to enter the backend folder, and then run
        <kbd>python manage.py migrate</kbd>. This will get your database ready with necessary
        tables.

    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_migrate.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Click the green triangular play button in the menu bar next to "Run backend" to run the
        Django development server. If everything is working, you should see some output like this in
        the run panel.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_run_server.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Click on the link where the site is being run locally <a href="http://127.0.0.1:8000"
                                                                  target="_blank">http://127.0.0.1:8000</a>,
        where you should see... well... an error message. This is because we are not yet running the
        frontend development server. If you're seeing this error, that means that everything is
        working so far!
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_backend_without_frontend.png"/></p>
    </div>
  </div>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Navigate to <a href="http://127.0.0.1:8000/api/all_photos/">
        http://127.0.0.1:8000/api/all_photos/</a>,
        and you should see a Django REST framework debug page, which looks like this.
        There are no photos yet!
    </div>
    <div class="col-lg-8">
      <p>
        <img class="img-fluid mx-2 mx-lg-0 border" alt=""
             src="/assets/images/paris/paris_no_photos.png"/>
        <!--        <img class="img-fluid mx-2 mx-lg-0 border" alt=""-->
        <!--              src="/assets/images/paris/paris_django_rest.png"/>-->

      </p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Go to our <a
          target="_blank"
          href="https://www.dropbox.com/sh/o4x3kqr2mde2g2i/AABGGSdVqGC9oazyWyc_T28ga?dl=0">dropbox
        folder.</a> and download the <code>db_dump.json</code> file, put it somewhere where you can
        find it,
        like in the project itself. Run the following command:
        <kbd>python manage.py loaddata path/to/the/db_dump.json</kbd>. Now you should see some
        entries when you access <a href="http://127.0.0.1:8000" target="_blank">
          http://127.0.0.1:8000/api/all_photos</a>
      </p>
    </div>
    <div class="col-lg-8">
      <p>
        <img class="img-fluid mx-2 mx-lg-0 border" alt=""
             src="/assets/images/paris/paris_loaddata.png"/>
        <br/><br/>
        <img class="img-fluid mx-2 mx-lg-0 border" alt=""
             src="/assets/images/paris/paris_all_photos.png"/>
      </p>
    </div>
  </div>
</section>

<section>
  <h2>Setting up npm</h2>

  <p>Now that the Python/Django backend part of the site is up and running on your machine, the last
    coding step is to setup the JavaScript/React frontend. </p>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>In the project pane, find and open <code>frontend/src/App.js</code>.</p>
      <p><em>Do not</em> click <code>Run 'npm install'</code>.</p>
      <p>If you see a banner saying <code>Switch language version to React JSX</code>, <em>do</em>
        click that.</p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_npm.png"/></p>
    </div>
  </div>

  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Instead, go back to the terminal, and navigate to the <code>frontend</code> directory</p>
      <p>See the image here - you may need to issue a few <code>cd</code> commands to get there. If
        you do not know how to do that, ask a returning UROP for help.</p>
      <p>Once you're in the <code>frontend</code> directory, issue the command <kbd>npm ci</kbd>.
        You might have to wait a little while now, as npm installs all of the Node modules we need
        to build the frontend.</p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_cd_frontend_npm_ci.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Now, go back to what used to be the <code>Add Configurations</code> button but now says
        <code>Run backend</code>. Click <code>Edit configurations</code> to go back to the <code>Run/Debug
          Configurations</code> window. Click the same + in the top left corner, and then select
        npm. Name this configuration <code>Run frontend</code>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/rereading_frontend_0.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>In the <code>package.json</code> field, click the dropdown menu down arrow, and select
        <code>frontend/package.json</code>. This is the file that tells PyCharm and npm how our
        frontend application is configured.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_package_json.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>In the <code>scripts</code> field, select <code>start</code> from the dropdown menu.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_pycharm_npm_start.png"/></p>
    </div>
  </div>


  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Click OK and exit the settings. Once again, click the green triangle 'Run' button next to
        <code>Run frontend</code> which will start the frontend development server. Once you see a
        success message in the run panel, go back to <a href="http://127.0.0.1:8000"
                                                        target="_blank">http://127.0.0.1:8000</a>,
        where you should now see the prototype landing page.
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_hello_world.png"/></p>
    </div>
  </div>
  <p>Congratulations! You've got the project up and running on your machine. </p>
</section>
<section>
  <h2>Setting up your photos</h2>

  <p>One final step to get everything to working order is to download the photos so that they can
    show up when the user clicks around the squares.</p>
  <hr class="d-lg-none">
  <div class="row">
    <div class="col-lg-4">
      <p>Go to the <a
          target="_blank"
          href="https://www.dropbox.com/sh/o4x3kqr2mde2g2i/AABGGSdVqGC9oazyWyc_T28ga?dl=0">dropbox
        folder.</a> and download the entirety of the images folder.</p>
      <p>Unzip it, and put it into your assets (paris_1970/assets) folder. This might take a while.
        Now you should be able to
        see images when you access (a few of the) map squares.
        <a href="http://localhost:8000/photo/6/2/">Go to image 2 in square 6</a>.</p>
    </div>
    <div class="col-lg-8">
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_dropbox.png"/></p>
      <br/><br/>
      <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
              src="/assets/images/paris/paris_images.png"/></p>
    </div>
  </div>


  <section>
    <h2>Closing and restarting the project</h2>
    <hr class="d-lg-none">
    <div class="row">
      <div class="col-lg-4">
        <p>Close PyCharm, terminate any processes when it asks, and then restart PyCharm. In order
          to
          run the project, you have to go to this dropdown menu, click <code>Run backend</code> and
          then the triangular 'Run' button next to it, and then click <code>Run frontend</code> and
          do
          the same.
      </div>
      <div class="col-lg-8">
        <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
                src="/assets/images/paris/paris_run.png"/></p>
      </div>
    </div>


    <hr class="d-lg-none">
    <div class="row">
      <div class="col-lg-4">
        <p>Once you see both <code>Run backend</code> and <code>Run frontend</code> tabs open in the
          <code>Run</code> panel at the bottom of PyCharm, and both show success messages, you can
          go
          back to the site running locally on your machine.
        </p>


        <p>
          Please note that the frontend pane will show a url ending in <code>:3000</code>. This is
          another way to access the frontend directly without running the Django server, but for
          this
          project, we'll be ignoring that entirely.
      </div>
      <div class="col-lg-8">
        <p><img class="img-fluid mx-2 mx-lg-0 border" alt=""
                src="/assets/images/paris/paris_run_tab.png"/></p>
      </div>
    </div>

    <strong><p><a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">GOOD JOB YOU ARE DONE!</a></p>
    </strong>

    <p>
      Now find someone who's having trouble, and help them get going, too. If you're a new UROP, ask
      a
      returning UROP about the projects they've worked on.
    </p>
  </section>

  <a href="/" class="btn btn-outline-primary float-left col-5 col-md-3">&larr; Return to home</a>

            </div>
        </main>
    </div>
</div>

<!-- Prism.js for syntax highlighting in code blocks: https://prismjs.com -->
<script src="/assets/js/prism.js"></script>
</body>
</html>
